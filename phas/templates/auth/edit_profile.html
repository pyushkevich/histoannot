{% extends 'base.html' %}

{% block header %}
  {% block title %}User Profile{% endblock %}
{% endblock %}

{% block content %}
<script type="text/javascript" src="{{ url_for('static', filename='jquery-3.6.4.min.js') }}"></script>

    <form method="post" class="pure-form pure-form-stacked">
      <fieldset>
        <div class="pure-g" style="max-width: 640px;">
          <div class="pure-u-1 pure-u-md-1-2">
            <label for="username">Username:</label>
            <input name="username" class="pure-u-23-24" type="text" id="username" value="{{username}}" readonly style="width:180pt;">
          </div>
          <div class="pure-u-1 pure-u-md-1-2">
            <label for="email">Email Address:</label>
            <input name="email" class="pure-u-23-24" type="email" id="email" value="{{email}}" required style="width:180pt;">
          </div>
          <div class="pure-u-1 pure-u-md-1-3">
            <button type="submit" class="pure-button pure-button-primary">Save Changes</button>
          </div>
          <div class="pure-u-1 pure-u-md-2-3"></div>
        </div>
      </fieldset>
    </form>

<h3>Generate API Key</h3>
<p style="max-width: 640px;">If you need to interface with the server using the REST API (e.g., in a Python script), use the button below to download a JSON file containing your API key. <b>Please store this file securely</b>. A person with access to this file will have the same access to the system as someone who has your username and password.</p>

<a href="{{url_for('auth.generate_api_key')}}" download="phas_{{username}}_api_key.json">
	<div class="pure-u-1 pure-u-md-1-3">
		<button type="submit" class="pure-button pure-button-primary">Download API Key</button>
	</div>
</a>
{% endblock %}

